<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ Next.js next-intl å®Œæ•´æµç¨‹è¯¦è§£</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content-wrapper {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .tab-container {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .flow-diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .step {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .step:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            float: left;
            margin-right: 15px;
        }
        
        .step-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .step-file {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            color: #e83e8c;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .step-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .step-data {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            color: #666;
            border-left: 4px solid #667eea;
        }
        
        .arrow {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 10px 0;
        }
        
        .data-flow {
            display: flex;
            align-items: center;
            margin: 10px 20px;
            padding: 10px;
            background: #f0f7ff;
            border-radius: 5px;
            border: 1px solid #cce7ff;
        }
        
        .data-item {
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            margin: 0 5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .flow-arrow {
            color: #667eea;
            font-size: 1.5em;
            margin: 0 10px;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            text-align: center;
        }
        
        .summary-box h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .file-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .file-card:hover {
            border-color: #667eea;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2);
        }
        
        .file-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .file-card .file-path {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 12px;
            color: #e83e8c;
            margin-bottom: 10px;
        }
        
        .interactive-demo {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .demo-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .demo-button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .demo-result {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ Next.js next-intl å®Œæ•´æµç¨‹è¯¦è§£</h1>
            <p>ä»è¯·æ±‚åˆ°å“åº”çš„å®Œæ•´æ•°æ®æµè½¬å¯è§†åŒ–æŒ‡å—</p>
        </div>
        
        <div class="content-wrapper">
            <div class="tab-container">
                <button class="tab active" onclick="showTab('overview')">ğŸ¯ æ€»è§ˆæµç¨‹</button>
                <button class="tab" onclick="showTab('detailed')">ğŸ“‹ è¯¦ç»†æ­¥éª¤</button>
                <button class="tab" onclick="showTab('files')">ğŸ“ æ–‡ä»¶ä½œç”¨</button>
                <button class="tab" onclick="showTab('demo')">ğŸ”„ äº¤äº’æ¼”ç¤º</button>
            </div>
            
            <!-- æ€»è§ˆæµç¨‹ -->
            <div id="overview" class="tab-content active">
                <h2>ğŸ¯ å®Œæ•´æµç¨‹æ€»è§ˆ</h2>
                
                <div class="flow-diagram">
                    <div class="mermaid">
                        graph TD
                            A["ğŸŒ ç”¨æˆ·è®¿é—®<br/>/Day11/zh"] --> B["ğŸšª middleware.ts<br/>æ‹¦æˆªè¯·æ±‚"]
                            
                            B --> C{"æ£€æŸ¥ URL è¯­è¨€?"}
                            C -->|æœ‰è¯­è¨€ä»£ç  'zh'| D["âœ… æå– locale: 'zh'"]
                            C -->|æ— è¯­è¨€ä»£ç | E["âŒ é‡å®šå‘åˆ°<br/>/Day11/zh"]
                            
                            D --> F["ğŸ“¡ è®¾ç½® Header<br/>x-locale: 'zh'"]
                            F --> G["ğŸ—ï¸ layout.tsx<br/>æ¸²æŸ“å¼€å§‹"]
                            
                            G --> H["ğŸ”“ await params<br/>è·å– { locale: 'zh' }"]
                            H --> I["ğŸ¯ setRequestLocale('zh')<br/>å»ºç«‹ä¸Šä¸‹æ–‡"]
                            I --> J["ğŸ“ getMessages()<br/>è°ƒç”¨è§¦å‘"]
                            
                            J --> K["ğŸ§  i18n/request.ts<br/>é…ç½®æ‰§è¡Œ"]
                            K --> L["ğŸ“¡ è·å– x-locale<br/>ä» header"]
                            L --> M["ğŸ“‚ åŠ¨æ€å¯¼å…¥<br/>messages/zh.json"]
                            
                            M --> N["ğŸ è¿”å›é…ç½®<br/>{ locale: 'zh', messages: {...} }"]
                            N --> O["ğŸ”„ NextIntlClientProvider<br/>æä¾›ç¿»è¯‘ä¸Šä¸‹æ–‡"]
                            
                            O --> P["ğŸ“„ page.tsx<br/>æ¸²æŸ“é¡µé¢"]
                            P --> Q["ğŸ” useTranslations('Home')<br/>è·å–ç¿»è¯‘å‡½æ•°"]
                            Q --> R["âœ¨ æ˜¾ç¤ºä¸­æ–‡å†…å®¹<br/>æ¬¢è¿ä½¿ç”¨ Next.js å›½é™…åŒ–ï¼"]
                            
                            style A fill:#e1f5fe
                            style B fill:#fff3e0
                            style D fill:#e8f5e8
                            style F fill:#f3e5f5
                            style K fill:#fff8e1
                            style M fill:#fce4ec
                            style R fill:#e8f5e8
                    </div>
                </div>
                
                <div class="summary-box">
                    <h3>ğŸ”‘ æ ¸å¿ƒç†è§£</h3>
                    <p><strong>middleware.ts</strong> æ˜¯é—¨å«ï¼Œ<strong>layout.tsx</strong> æ˜¯è§¦å‘å™¨ï¼Œ<strong>request.ts</strong> æ˜¯å¤§è„‘ï¼Œ<strong>page.tsx</strong> æ˜¯æ‰§è¡Œè€…</p>
                    <p>æ•°æ®æµï¼š<span class="highlight">URL â†’ Header â†’ Layoutè§¦å‘ â†’ Configæ‰§è¡Œ â†’ MessagesåŠ è½½ â†’ Translationæ˜¾ç¤º</span></p>
                </div>
            </div>
            
            <!-- è¯¦ç»†æ­¥éª¤ -->
            <div id="detailed" class="tab-content">
                <h2>ğŸ“‹ è¯¦ç»†æ‰§è¡Œæ­¥éª¤</h2>
                
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-title">ğŸŒ ç”¨æˆ·å‘èµ·è¯·æ±‚</div>
                    <div class="step-description">ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>/Day11/zh</code></div>
                    <div class="step-data">
                        <strong>è¯·æ±‚ URL:</strong> http://localhost:3000/Day11/zh<br>
                        <strong>è¯·æ±‚æ–¹æ³•:</strong> GET<br>
                        <strong>æµè§ˆå™¨è¯­è¨€:</strong> zh-CN,zh;q=0.9,en;q=0.8
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-title">ğŸšª Middleware æ‹¦æˆª</div>
                    <div class="step-file">ğŸ“„ src/middleware.ts</div>
                    <div class="step-description">ç¬¬ä¸€é“é˜²çº¿ï¼Œæ£€æŸ¥æ¯ä¸ªè¯·æ±‚çš„è¯­è¨€ä¿¡æ¯</div>
                    <div class="code-block">
// è§£æ URL è·¯å¾„
const segments = pathname.split('/') // ['', 'Day11', 'zh']
const maybeLocale = segments[2]      // 'zh'

// éªŒè¯è¯­è¨€ä»£ç 
if (locales.includes(maybeLocale)) {
  // âœ… æœ‰æ•ˆè¯­è¨€ï¼Œè®¾ç½® header
  response.headers.set('x-locale', 'zh')
  return response
}
                    </div>
                    <div class="data-flow">
                        <div class="data-item">pathname: /Day11/zh</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">segments: ['', 'Day11', 'zh']</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">x-locale: 'zh'</div>
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-title">ğŸ—ï¸ Layout ç»„ä»¶æ¸²æŸ“å¼€å§‹</div>
                    <div class="step-file">ğŸ“„ src/app/Day11/[locale]/layout.tsx</div>
                    <div class="step-description">é¡µé¢åŸºç¡€æ¶æ„å¼€å§‹æ¸²æŸ“ï¼Œå¤„ç† Next.js 15 çš„ Promise å‚æ•°</div>
                    <div class="code-block">
// Next.js 15 å…¼å®¹æ€§å¤„ç†
const { locale } = await params  // Promise&lt;{locale: string}&gt;
console.log('locale:', locale)   // 'zh'

// å»ºç«‹ next-intl ä¸Šä¸‹æ–‡
setRequestLocale(locale)         // å…³é”®æ­¥éª¤ï¼

// ğŸ”‘ è¿™ä¸ªè°ƒç”¨ä¼šè§¦å‘ i18n/request.ts æ‰§è¡Œ
const messages = await getMessages()
                    </div>
                    <div class="data-flow">
                        <div class="data-item">params: Promise&lt;{locale: 'zh'}&gt;</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">locale: 'zh'</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">setRequestLocale('zh')</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">getMessages()è°ƒç”¨</div>
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-title">ğŸ§  é…ç½®ä¸­å¿ƒæ‰§è¡Œ</div>
                    <div class="step-file">ğŸ“„ src/i18n/request.ts</div>
                    <div class="step-description">ç”± getMessages() è§¦å‘æ‰§è¡Œï¼Œæ™ºèƒ½ç¿»è¯‘åŠ è½½å™¨ï¼Œå¤šé‡ä¿é™©è·å–è¯­è¨€ä»£ç </div>
                    <div class="code-block">
export default getRequestConfig(async ({ requestLocale }) => {
  // æ–¹æ³•1: ä» middleware header è·å– (æœ€å¯é )
  const headersList = await headers()
  const headerLocale = headersList.get('x-locale') // 'zh'
  
  // æ–¹æ³•2: ä» next-intl å†…ç½®æœºåˆ¶è·å– (å¤‡ç”¨)
  const requested = await requestLocale            // undefined (Next.js 15 é—®é¢˜)
  
  const locale = headerLocale || defaultLocale     // 'zh'
  
  // åŠ¨æ€å¯¼å…¥ç¿»è¯‘æ–‡ä»¶
  const messages = await import(`../messages/${locale}.json`)
  
  return { locale: 'zh', messages: {...} }
})
                    </div>
                    <div class="data-flow">
                        <div class="data-item">getMessages()è§¦å‘</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">x-locale: 'zh'</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">locale: 'zh'</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">messages/zh.json</div>
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-title">ğŸ“š ç¿»è¯‘æ–‡ä»¶åŠ è½½</div>
                    <div class="step-file">ğŸ“„ src/messages/zh.json</div>
                    <div class="step-description">åŒ…å«æ‰€æœ‰ä¸­æ–‡ç¿»è¯‘å†…å®¹çš„ JSON æ–‡ä»¶è¢«åŠ¨æ€å¯¼å…¥</div>
                    <div class="code-block">
{
  "Home": {
    "title": "Next.js å›½é™…åŒ–æ¼”ç¤º",
    "welcome": "æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å…¨çƒåŒ–å¹³å°",
    "description": "è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ next-intl å®ç°çš„ Next.js 15 å›½é™…åŒ–æ¼”ç¤ºã€‚æˆ‘ä»¬æ”¯æŒå¤šç§è¯­è¨€ï¼Œä¸ºä¸åŒåœ°åŒºçš„ç”¨æˆ·æä¾›æ— ç¼çš„ä½¿ç”¨ä½“éªŒã€‚"
  }
}
                    </div>
                    <div class="step-data">
                        <strong>æ–‡ä»¶å¤§å°:</strong> ~2KB<br>
                        <strong>åŠ è½½æ–¹å¼:</strong> åŠ¨æ€ import (æŒ‰éœ€åŠ è½½)<br>
                        <strong>ç¼“å­˜:</strong> Next.js è‡ªåŠ¨ç¼“å­˜
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">6</div>
                    <div class="step-title">ğŸ”„ å®¢æˆ·ç«¯ä¸Šä¸‹æ–‡æä¾›</div>
                    <div class="step-file">ğŸ“„ NextIntlClientProvider</div>
                    <div class="step-description">å°†æœåŠ¡å™¨ç«¯ç¿»è¯‘å†…å®¹ä¼ é€’ç»™å®¢æˆ·ç«¯ç»„ä»¶ï¼Œå®ŒæˆLayoutæ¸²æŸ“</div>
                    <div class="code-block">
&lt;NextIntlClientProvider messages={messages}&gt;
  &lt;div className="min-h-screen bg-gray-50"&gt;
    {children}  {/* page.tsx å°†åœ¨è¿™é‡Œæ¸²æŸ“ */}
  &lt;/div&gt;
&lt;/NextIntlClientProvider&gt;
                    </div>
                    <div class="step-data">
                        <strong>ä½œç”¨:</strong> æ¡¥æ¥æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯<br>
                        <strong>æä¾›:</strong> useTranslations() hook<br>
                        <strong>ç¡®ä¿:</strong> æ°´åˆä¸€è‡´æ€§
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">7</div>
                    <div class="step-title">ğŸ“„ é¡µé¢ç»„ä»¶æ¸²æŸ“</div>
                    <div class="step-file">ğŸ“„ src/app/Day11/[locale]/page.tsx</div>
                    <div class="step-description">å®é™…æ˜¾ç¤ºç¿»è¯‘å†…å®¹çš„é¡µé¢ç»„ä»¶å¼€å§‹æ¸²æŸ“</div>
                    <div class="code-block">
export default function Day11Page() {
  // è·å–ç¿»è¯‘å‡½æ•°ï¼ŒæŒ‡å®šå‘½åç©ºé—´
  const t = useTranslations('Home')
  
  return (
    &lt;section&gt;
      &lt;h1&gt;{t('title')}&lt;/h1&gt;            {/* Next.js å›½é™…åŒ–æ¼”ç¤º */}
      &lt;h2&gt;{t('welcome')}&lt;/h2&gt;          {/* æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å…¨çƒåŒ–å¹³å° */}
      &lt;p&gt;{t('description')}&lt;/p&gt;       {/* è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ next-intl... */}
    &lt;/section&gt;
  )
}
                    </div>
                    <div class="data-flow">
                        <div class="data-item">useTranslations('Home')</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">t('title')</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">messages.Home.title</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="data-item">"Next.js å›½é™…åŒ–æ¼”ç¤º"</div>
                    </div>
                </div>
                
                <div class="arrow">â¬‡ï¸</div>
                
                <div class="step">
                    <div class="step-number">8</div>
                    <div class="step-title">âœ¨ æœ€ç»ˆæ¸²æŸ“ç»“æœ</div>
                    <div class="step-description">ç”¨æˆ·çœ‹åˆ°å®Œæ•´çš„ä¸­æ–‡é¡µé¢</div>
                    <div class="step-data">
                        <strong>é¡µé¢æ ‡é¢˜:</strong> Next.js å›½é™…åŒ–æ¼”ç¤º<br>
                        <strong>å½“å‰è¯­è¨€:</strong> zh<br>
                        <strong>ä¸»è¦å†…å®¹:</strong> æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å…¨çƒåŒ–å¹³å°<br>
                        <strong>æè¿°å†…å®¹:</strong> ä½¿ç”¨ next-intl å®ç°çš„å›½é™…åŒ–æ¼”ç¤º<br>
                        <strong>å“åº”æ—¶é—´:</strong> ~100ms (æœåŠ¡å™¨ç«¯æ¸²æŸ“)
                    </div>
                </div>
            </div>
            
            <!-- æ–‡ä»¶ä½œç”¨ -->
            <div id="files" class="tab-content">
                <h2>ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯¦ç»†ä½œç”¨</h2>
                
                <div class="file-grid">
                    <div class="file-card">
                        <h4>ğŸšª middleware.ts</h4>
                        <div class="file-path">src/middleware.ts</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–é—¨å«</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>æ‹¦æˆªæ‰€æœ‰è¯·æ±‚</li>
                            <li>æ£€æŸ¥ URL ä¸­çš„è¯­è¨€ä»£ç </li>
                            <li>è®¾ç½® x-locale header</li>
                            <li>æ— è¯­è¨€æ—¶è‡ªåŠ¨é‡å®šå‘</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> é¡µé¢æ¸²æŸ“å‰</p>
                        <p><strong>å…³é”®ä»£ç :</strong></p>
                        <div class="code-block">
response.headers.set('x-locale', locale)
                        </div>
                    </div>
                    
                    <div class="file-card">
                        <h4>ğŸ—ï¸ layout.tsx</h4>
                        <div class="file-path">src/app/Day11/[locale]/layout.tsx</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–è§¦å‘å™¨</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>è§£æ Promise ç±»å‹çš„ params</li>
                            <li>è°ƒç”¨ setRequestLocale()</li>
                            <li>è§¦å‘ getMessages() æ‰§è¡Œ</li>
                            <li>æä¾› NextIntlClientProvider</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> ç»„ä»¶æ¸²æŸ“å¼€å§‹</p>
                        <p><strong>å…³é”®ä»£ç :</strong></p>
                        <div class="code-block">
const messages = await getMessages()
                        </div>
                    </div>
                    
                    <div class="file-card">
                        <h4>ğŸ§  i18n/request.ts</h4>
                        <div class="file-path">src/i18n/request.ts</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–å¤§è„‘</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>è¢« getMessages() è§¦å‘æ‰§è¡Œ</li>
                            <li>ä» header è·å–è¯­è¨€ä¿¡æ¯</li>
                            <li>åŠ¨æ€å¯¼å…¥ç¿»è¯‘æ–‡ä»¶</li>
                            <li>è¿”å›é…ç½®å¯¹è±¡</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> Layout è°ƒç”¨ getMessages() æ—¶</p>
                        <p><strong>å…³é”®ä»£ç :</strong></p>
                        <div class="code-block">
const messages = await import(`../messages/${locale}.json`)
                        </div>
                    </div>
                    
                    <div class="file-card">
                        <h4>ğŸ“„ page.tsx</h4>
                        <div class="file-path">src/app/Day11/[locale]/page.tsx</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–æ‰§è¡Œè€…</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>ä½¿ç”¨ useTranslations() hook</li>
                            <li>è·å–ç¿»è¯‘å‡½æ•°</li>
                            <li>æ¸²æŸ“ç¿»è¯‘å†…å®¹</li>
                            <li>æ˜¾ç¤ºæœ€ç»ˆç»“æœ</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> Layout æ¸²æŸ“å®Œæˆå</p>
                        <p><strong>å…³é”®ä»£ç :</strong></p>
                        <div class="code-block">
const t = useTranslations('Home')
                        </div>
                    </div>
                    
                    <div class="file-card">
                        <h4>ğŸ“ messages/zh.json</h4>
                        <div class="file-path">src/messages/zh.json</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–æ•°æ®æº</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>å­˜å‚¨ä¸­æ–‡ç¿»è¯‘å†…å®¹</li>
                            <li>æŒ‰å‘½åç©ºé—´ç»„ç»‡</li>
                            <li>æ”¯æŒåµŒå¥—ç»“æ„</li>
                            <li>æŒ‰éœ€åŠ¨æ€åŠ è½½</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> request.ts åŠ¨æ€å¯¼å…¥æ—¶</p>
                        <p><strong>å…³é”®ç‰¹æ€§:</strong></p>
                        <div class="code-block">
{
  "Home": {
    "title": "...",
    "welcome": "..."
  }
}
                        </div>
                    </div>
                    
                    <div class="file-card">
                        <h4>ğŸ”„ LanguageSwitcher.tsx</h4>
                        <div class="file-path">src/app/Day11/LanguageSwitcher.tsx</div>
                        <p><strong>è§’è‰²:</strong> å›½é™…åŒ–æ§åˆ¶å™¨</p>
                        <p><strong>èŒè´£:</strong></p>
                        <ul>
                            <li>æä¾›è¯­è¨€åˆ‡æ¢ç•Œé¢</li>
                            <li>æ£€æµ‹å½“å‰è¯­è¨€</li>
                            <li>æ‰§è¡Œè·¯ç”±è·³è½¬</li>
                            <li>ä¿æŒé¡µé¢çŠ¶æ€</li>
                        </ul>
                        <p><strong>æ‰§è¡Œæ—¶æœº:</strong> ç”¨æˆ·äº¤äº’æ—¶</p>
                        <p><strong>å…³é”®ä»£ç :</strong></p>
                        <div class="code-block">
router.push(newPath)
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- äº¤äº’æ¼”ç¤º -->
            <div id="demo" class="tab-content">
                <h2>ğŸ”„ äº¤äº’æ¼”ç¤º</h2>
                
                <div class="interactive-demo">
                    <h3>æ¨¡æ‹Ÿ next-intl æ‰§è¡Œæµç¨‹</h3>
                    <p>ç‚¹å‡»æŒ‰é’®ä½“éªŒå®Œæ•´çš„å›½é™…åŒ–æµç¨‹</p>
                    
                    <button class="demo-button" onclick="simulateFlow('zh')">ğŸ‡¨ğŸ‡³ è®¿é—®ä¸­æ–‡é¡µé¢</button>
                    <button class="demo-button" onclick="simulateFlow('en')">ğŸ‡ºğŸ‡¸ è®¿é—®è‹±æ–‡é¡µé¢</button>
                    <button class="demo-button" onclick="simulateFlow('invalid')">âŒ è®¿é—®æ— æ•ˆè¯­è¨€</button>
                    
                    <div id="demo-result" class="demo-result">
                        ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æ¼”ç¤º
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-title">ğŸ“Š æ€§èƒ½åˆ†æ</div>
                    <div class="step-description">ä¸åŒé˜¶æ®µçš„æ€§èƒ½è¡¨ç°</div>
                    <div class="step-data">
                        <strong>Middleware æ‰§è¡Œ:</strong> ~1-2ms<br>
                        <strong>Layout æ¸²æŸ“:</strong> ~10-20ms<br>
                        <strong>Config æ‰§è¡Œ:</strong> ~5-10ms<br>
                        <strong>ç¿»è¯‘æ–‡ä»¶åŠ è½½:</strong> ~3-5ms<br>
                        <strong>Page æ¸²æŸ“:</strong> ~10-15ms<br>
                        <strong>æ€»è®¡:</strong> ~30-50ms
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-title">ğŸ¯ ä¼˜åŒ–å»ºè®®</div>
                    <div class="step-description">æå‡å›½é™…åŒ–æ€§èƒ½çš„å…³é”®ç‚¹</div>
                    <ul>
                        <li><strong>ç¿»è¯‘æ–‡ä»¶ç¼“å­˜:</strong> ä½¿ç”¨ React cache() é¿å…é‡å¤åŠ è½½</li>
                        <li><strong>æŒ‰éœ€åŠ è½½:</strong> åªå¯¼å…¥å½“å‰è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶</li>
                        <li><strong>é¢„åŠ è½½:</strong> åœ¨ç”¨æˆ·åˆ‡æ¢å‰é¢„åŠ è½½å¸¸ç”¨è¯­è¨€</li>
                        <li><strong>å‹ç¼©ä¼˜åŒ–:</strong> å‹ç¼© JSON æ–‡ä»¶å‡å°‘ä¼ è¾“å¤§å°</li>
                        <li><strong>CDN éƒ¨ç½²:</strong> å°†ç¿»è¯‘æ–‡ä»¶éƒ¨ç½²åˆ°å…¨çƒ CDN</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // Tab åˆ‡æ¢åŠŸèƒ½
        function showTab(tabName) {
            // éšè—æ‰€æœ‰å†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾
            event.target.classList.add('active');
        }
        
        // æ¨¡æ‹Ÿæµç¨‹æ¼”ç¤º
        function simulateFlow(locale) {
            const resultDiv = document.getElementById('demo-result');
            
            if (locale === 'zh') {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <div>âœ… 1. URL: /Day11/zh</div>
                        <div>âœ… 2. middleware.ts: è®¾ç½® x-locale: 'zh'</div>
                        <div>âœ… 3. layout.tsx: å¼€å§‹æ¸²æŸ“</div>
                        <div>âœ… 4. getMessages(): è§¦å‘é…ç½®</div>
                        <div>âœ… 5. request.ts: åŠ è½½ messages/zh.json</div>
                        <div>âœ… 6. Provider: æä¾›ç¿»è¯‘ä¸Šä¸‹æ–‡</div>
                        <div>âœ… 7. page.tsx: æ¸²æŸ“ä¸­æ–‡å†…å®¹</div>
                        <div style="color: #28a745; font-weight: bold; margin-top: 10px;">
                            ğŸ‰ ç»“æœ: "Next.js å›½é™…åŒ–æ¼”ç¤º"
                        </div>
                    </div>
                `;
            } else if (locale === 'en') {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <div>âœ… 1. URL: /Day11/en</div>
                        <div>âœ… 2. middleware.ts: è®¾ç½® x-locale: 'en'</div>
                        <div>âœ… 3. layout.tsx: å¼€å§‹æ¸²æŸ“</div>
                        <div>âœ… 4. getMessages(): è§¦å‘é…ç½®</div>
                        <div>âœ… 5. request.ts: åŠ è½½ messages/en.json</div>
                        <div>âœ… 6. Provider: æä¾›ç¿»è¯‘ä¸Šä¸‹æ–‡</div>
                        <div>âœ… 7. page.tsx: æ¸²æŸ“è‹±æ–‡å†…å®¹</div>
                        <div style="color: #28a745; font-weight: bold; margin-top: 10px;">
                            ğŸ‰ ç»“æœ: "Next.js Internationalization Demo"
                        </div>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <div>âŒ 1. URL: /Day11/invalid</div>
                        <div>âŒ 2. middleware.ts: æ— æ•ˆè¯­è¨€ä»£ç </div>
                        <div>ğŸ”„ 3. é‡å®šå‘åˆ°: /Day11/zh</div>
                        <div>âœ… 4. é‡æ–°æ‰§è¡Œæ­£å¸¸æµç¨‹...</div>
                        <div style="color: #dc3545; font-weight: bold; margin-top: 10px;">
                            âš ï¸ ç»“æœ: è‡ªåŠ¨é‡å®šå‘åˆ°é»˜è®¤è¯­è¨€
                        </div>
                    </div>
                `;
            }
        }
    </script>
</body>
</html> 